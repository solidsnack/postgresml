<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="PostgresML's architecture gives it a huge performance advantage over traditional deployments when it comes to latency, throughput and memory utilization." name=description><meta content="Lev Kokotov" name=author><link href=https://postgresml.org/blog/postgresml-is-8x-faster-than-python-http-microservices/ rel=canonical><link href=/images/logos/favicon.ico rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name=generator><meta content=PostgresML property=og:site_name><meta content="PostgresML is 8-40x faster than Python HTTP microservices" property=og:title><meta content="PostgresML's architecture gives it a huge performance advantage over traditional deployments when it comes to latency, throughput and memory utilization." property=og:description><meta content="Lev Kokotov" property=og:author><meta content=https://postgresml.org/images/logos/logo-small.png property=og:image><meta content="We're going really fast now." property=og:image:alt><meta content=article property=og:type><title>PostgresML is 8-40x faster than Python HTTP microservices - PostgresML</title><link href=../../assets/stylesheets/main.975780f9.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.2505c338.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=blue data-md-color-primary=indigo data-md-color-scheme=default dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#postgresml-is-8-40x-faster-than-python-http-microservices> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label=PostgresML class="md-header__button md-logo" data-md-component=logo href=../.. title=PostgresML> <img alt=logo src=/images/logos/logo-small.png> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Postgres<span style="color: dodgerblue">ML</span> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> PostgresML is 8-40x faster than Python HTTP microservices </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=blue data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=indigo data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=blue data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=blue data-md-color-scheme=slate id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/postgresml/postgresml title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> postgresml/postgresml </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../..> PostgresML </a> </li> <li class=md-tabs__item> <a href=../../user_guides/setup/quick_start_with_docker/ class=md-tabs__link> User Guides </a> </li> <li class=md-tabs__item> <a href=../../developer_guide/overview/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../data-is-living-and-relational/ class="md-tabs__link md-tabs__link--active"> Blog </a> </li> <li class=md-tabs__item> <a href=../../about/team/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label=PostgresML class="md-nav__button md-logo" data-md-component=logo href=../.. title=PostgresML> <img alt=logo src=/images/logos/logo-small.png> </a> Postgres<span style="color: dodgerblue">ML</span> </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/postgresml/postgresml title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> postgresml/postgresml </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../..> PostgresML </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2> User Guides <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="User Guides" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1 id=__nav_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_1> Setup <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Setup class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guides/setup/quick_start_with_docker/ class=md-nav__link> Quick Start with Docker </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1_2 id=__nav_2_1_2 type=checkbox> <label class=md-nav__link for=__nav_2_1_2> Installation <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Installation class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_1_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guides/setup/v2/installation/ class=md-nav__link> v2.0 </a> </li> <li class=md-nav__item> <a href=../../user_guides/setup/v2/upgrade-from-v1/ class=md-nav__link> Upgrading from v1.0 to v2.0 </a> </li> <li class=md-nav__item> <a href=../../user_guides/setup/installation/ class=md-nav__link> v1.0 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_guides/setup/distributed_training/ class=md-nav__link> Distributed Training </a> </li> <li class=md-nav__item> <a href=../../user_guides/setup/gpu_support/ class=md-nav__link> GPU Support </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 id=__nav_2_2 type=checkbox> <label class=md-nav__link for=__nav_2_2> Training <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Training class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Training </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guides/training/overview/ class=md-nav__link> Training Overview </a> </li> <li class=md-nav__item> <a href=../../user_guides/training/algorithm_selection/ class=md-nav__link> Algorithm Selection </a> </li> <li class=md-nav__item> <a href=../../user_guides/training/hyperparameter_search/ class=md-nav__link> Hyperparameter Search </a> </li> <li class=md-nav__item> <a href=../../user_guides/training/joint_optimization/ class=md-nav__link> Joint Optimization </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 id=__nav_2_3 type=checkbox> <label class=md-nav__link for=__nav_2_3> Predictions <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Predictions class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Predictions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guides/predictions/overview/ class=md-nav__link> Prediction Overview </a> </li> <li class=md-nav__item> <a href=../../user_guides/predictions/batch/ class=md-nav__link> Batch Predictions </a> </li> <li class=md-nav__item> <a href=../../user_guides/predictions/deployments/ class=md-nav__link> Deploying Models </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_guides/vector_operations/overview/ class=md-nav__link> Vector Operations </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 id=__nav_2_5 type=checkbox> <label class=md-nav__link for=__nav_2_5> Transformers <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Transformers class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Transformers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guides/transformers/setup/ class=md-nav__link> Setup </a> </li> <li class=md-nav__item> <a href=../../user_guides/transformers/pre_trained_models/ class=md-nav__link> Pre-Trained Models </a> </li> <li class=md-nav__item> <a href=../../user_guides/transformers/fine_tuning/ class=md-nav__link> Fine Tuning </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_guides/dashboard/overview/ class=md-nav__link> Dashboard </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 id=__nav_2_7 type=checkbox> <label class=md-nav__link for=__nav_2_7> Schema <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Schema class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Schema </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guides/schema/models/ class=md-nav__link> Models </a> </li> <li class=md-nav__item> <a href=../../user_guides/schema/snapshots/ class=md-nav__link> Snapshots </a> </li> <li class=md-nav__item> <a href=../../user_guides/schema/projects/ class=md-nav__link> Projects </a> </li> <li class=md-nav__item> <a href=../../user_guides/schema/deployments/ class=md-nav__link> Deployments </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3> Developer Guide <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Developer Guide" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer_guide/overview/ class=md-nav__link> Developer Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4> Blog <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Blog class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-is-living-and-relational/ class=md-nav__link> Data is Living and Relational </a> </li> <li class=md-nav__item> <a href=../postgres-full-text-search-is-awesome/ class=md-nav__link> Postgres Full Text Search is Awesome </a> </li> <li class=md-nav__item> <a href=../which-database-that-is-the-question/ class=md-nav__link> Which Database, That is the Question </a> </li> <li class=md-nav__item> <a href=../oxidizing-machine-learning/ class=md-nav__link> Oxidizing Machine Learning </a> </li> <li class=md-nav__item> <a href=../postgresml-is-moving-to-rust-for-our-2.0-release/ class=md-nav__link> PostgresML is Moving to Rust for our 2.0 Release </a> </li> <li class=md-nav__item> <a href=../backwards-compatible-or-bust-python-inside-rust-inside-postgres/ class=md-nav__link> Backwards Compatible or Bust: Python Inside Rust Inside Postgres </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> PostgresML is 8-40x faster than Python HTTP microservices <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> PostgresML is 8-40x faster than Python HTTP microservices </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#candidate-architectures> Candidate architectures </a> <nav aria-label="Candidate architectures" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#postgresml> PostgresML </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#python> Python </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ml> ML </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#results> Results </a> <nav aria-label=Results class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#throughput> Throughput </a> <nav aria-label=Throughput class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#why-throughput-is-important> Why throughput is important </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#latency> Latency </a> <nav aria-label=Latency class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#why-latency-is-important> Why latency is important </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#memory-utilization> Memory utilization </a> <nav aria-label="Memory utilization" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#training> Training </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#why-memory-utilization-is-important> Why memory utilization is important </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#what-about-ultrajsonmessagepackserializer-x> What about UltraJSON/MessagePack/Serializer X? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#what-about-the-real-world> What about the real world? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#methodology> Methodology </a> <nav aria-label=Methodology class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#hardware> Hardware </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#configuration> Configuration </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ml_1> ML </a> <nav aria-label=ML class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#data> Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#model> Model </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#source-code> Source code </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#feedback> Feedback </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../scaling-postgresml-to-one-million-requests-per-second/ class=md-nav__link> Scaling PostgresML to 1 Million Requests per Second </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 id=__nav_5 type=checkbox> <label class=md-nav__link for=__nav_5> About <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=About class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/team/ class=md-nav__link> Team </a> </li> <li class=md-nav__item> <a href=../../about/roadmap/ class=md-nav__link> Roadmap </a> </li> <li class=md-nav__item> <a href=../../about/motivation/ class=md-nav__link> Motivation </a> </li> <li class=md-nav__item> <a href=../../about/faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../about/license/ class=md-nav__link> License </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#candidate-architectures> Candidate architectures </a> <nav aria-label="Candidate architectures" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#postgresml> PostgresML </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#python> Python </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ml> ML </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#results> Results </a> <nav aria-label=Results class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#throughput> Throughput </a> <nav aria-label=Throughput class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#why-throughput-is-important> Why throughput is important </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#latency> Latency </a> <nav aria-label=Latency class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#why-latency-is-important> Why latency is important </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#memory-utilization> Memory utilization </a> <nav aria-label="Memory utilization" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#training> Training </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#why-memory-utilization-is-important> Why memory utilization is important </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#what-about-ultrajsonmessagepackserializer-x> What about UltraJSON/MessagePack/Serializer X? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#what-about-the-real-world> What about the real world? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#methodology> Methodology </a> <nav aria-label=Methodology class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#hardware> Hardware </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#configuration> Configuration </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ml_1> ML </a> <nav aria-label=ML class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#data> Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#model> Model </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#source-code> Source code </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#feedback> Feedback </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/postgresml/postgresml/blob/master/pgml-docs/docs/blog/postgresml-is-8x-faster-than-python-http-microservices.md title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg> </a> <h1 id=postgresml-is-8-40x-faster-than-python-http-microservices>PostgresML is 8-40x faster than Python HTTP microservices<a class=headerlink href=#postgresml-is-8-40x-faster-than-python-http-microservices title="Permanent link">¶</a></h1> <p class=author> <a class=glightbox data-desc-position=bottom data-height=auto data-width=100% href=/images/team/lev.jpg><img alt=Author height=54px src=/images/team/lev.jpg width=54px></a> Lev Kokotov<br> October 18, 2022 </p> <p>Machine learning architectures can be some of the most complex, expensive and <em>difficult</em> arenas in modern systems. The number of technologies and the amount of required hardware compete for tightening headcount, hosting, and latency budgets. Unfortunately, the trend in the industry is only getting worse along these lines, with increased usage of state-of-the-art architectures that center around data warehouses, microservices and NoSQL databases.</p> <p>PostgresML is a simpler alternative to that ever-growing complexity. In this post, we explore some additional performance benefits of a more elegant architecture and discover that PostgresML outperforms traditional Python microservices by a <strong>factor of 8</strong> in local tests and by a <strong>factor of 40</strong> on AWS EC2.</p> <h2 id=candidate-architectures>Candidate architectures<a class=headerlink href=#candidate-architectures title="Permanent link">¶</a></h2> <p>To consider Python microservices with every possible advantage, our first benchmark is run with Python and Redis located on the same machine. Our goal is to avoid any additional network latency, which puts it on a more even footing with PostgresML. Our second test takes place on AWS EC2, with Redis and Gunicorn separated by a network; this benchmark proves to be relatively devastating.</p> <p>The full source code for both benchmarks is available on <a href=https://github.com/postgresml/postgresml/tree/master/pgml-docs/docs/blog/benchmarks/python_microservices_vs_postgresml>Github</a>.</p> <h3 id=postgresml>PostgresML<a class=headerlink href=#postgresml title="Permanent link">¶</a></h3> <p>PostgresML architecture is composed of:</p> <ol> <li>A PostgreSQL server with PostgresML v2.0</li> <li><a href=https://www.postgresql.org/docs/current/pgbench.html>pgbench</a> SQL client</li> </ol> <h3 id=python>Python<a class=headerlink href=#python title="Permanent link">¶</a></h3> <p>Python architecture is composed of:</p> <ol> <li>A Flask/Gunicorn server accepting and returning JSON</li> <li>CSV file with the training data</li> <li>Redis feature store with the inference dataset, serialized with JSON</li> <li><a href=https://httpd.apache.org/docs/2.4/programs/ab.html>ab</a> HTTP client</li> </ol> <h3 id=ml>ML<a class=headerlink href=#ml title="Permanent link">¶</a></h3> <p>Both architectures host the same XGBoost model, running predictions against the same dataset. See <a href=#ml_1>Methodology</a> for more details.</p> <h2 id=results>Results<a class=headerlink href=#results title="Permanent link">¶</a></h2> <h3 id=throughput>Throughput<a class=headerlink href=#throughput title="Permanent link">¶</a></h3> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=188372587&format=interactive" width=600></iframe> </center></p> <p>Throughput is defined as the number of XGBoost predictions the architecture can serve per second. In this benchmark, PostgresML outperformed Python and Redis, running on the same machine, by a <strong>factor of 8</strong>.</p> <p>In Python, most of the bottleneck comes from having to fetch and deserialize Redis data. Since the features are externally stored, they need to be passed through Python and into XGBoost. XGBoost itself is written in C++, and it's Python library only provides a convenient interface. The prediction coming out of XGBoost has to go through Python again, serialized as JSON, and sent via HTTP to the client. </p> <p>This is pretty much the bare minimum amount of work you can do for an inference microservice.</p> <p>PostgresML, on the other hand, collocates data and compute. It fetches data from a Postgres table, which already comes in a standard floating point format, and the Rust inference layer forwards it to XGBoost via a pointer.</p> <p>An interesting thing happened when the benchmark hit 20 clients: PostgresML throughput starts to quickly decrease. This may be surprising to some, but to Postgres enthusiasts it's a known issue: Postgres isn't very good at handling more concurrent active connections than CPU threads. To mitigate this, we introduced PgBouncer (a Postgres proxy and pooler) in front of the database, and the throughput increased back up, and continued to hold as we went to 100 clients.</p> <p>It's worth noting that the benchmarking machine had only 16 available CPU threads (8 cores). If more cores were available, the bottleneck would only occur with more clients. The general recommendation for Postgres servers it to open around 2 connections per available CPU core, although newer versions of PostgreSQL have been incrementally chipping away at this limitation.</p> <h4 id=why-throughput-is-important>Why throughput is important<a class=headerlink href=#why-throughput-is-important title="Permanent link">¶</a></h4> <p>Throughput allows you to do more with less. If you're able to serve 30,000 queries per second using a single machine, but only using 1,000 today, you're unlikely to need an upgrade anytime soon. On the other hand, if the system can only serve 5,000 requests, an expensive and possibly stressful upgrade is in your near future.</p> <h3 id=latency>Latency<a class=headerlink href=#latency title="Permanent link">¶</a></h3> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=1092074944&format=interactive" width=600></iframe> </center></p> <p>Latency is defined as the time it takes to return a single XGBoost prediction. Since most systems have limited resources, throughput directly impacts latency (and vice versa). If there are many active requests, clients waiting in the queue take longer to be serviced, and overall system latency increases.</p> <p>In this benchmark, PostgresML outperformed Python by a <strong>factor of 8</strong> as well. You'll note the same issue happens at 20 clients, and the same mitigation using PgBouncer reduces its impact. Meanwhile, Python's latency continues to increase substantially.</p> <p>Latency is a good metric to use when describing the performance of an architecture. In other words, if I were to use this service, I would get a prediction back in at most this long, irrespective of how many other clients are using it.</p> <h4 id=why-latency-is-important>Why latency is important<a class=headerlink href=#why-latency-is-important title="Permanent link">¶</a></h4> <p>Latency is important in machine learning services because they are often running as an addition to the main application, and sometimes have to be accessed multiple times during the same HTTP request.</p> <p>Let's take the example of an e-commerce website. A typical storefront wants to show many personalization models concurrently. Examples of such models could include "buy it again" recommendations for recurring purchases (binary classification), or "popular items in your area" (geographic clustering of purchase histories) or "customers like you bought this item" (nearest neighbour model).</p> <p>All of these models are important because they have been proven, over time, to be very successful at driving purchases. If inference latency is high, the models start to compete for very expensive real estate, front page and checkout, and the business has to drop some of them or, more likely, suffer from slow page loads. Nobody likes a slow app when they are trying to order groceries or dinner.</p> <h3 id=memory-utilization>Memory utilization<a class=headerlink href=#memory-utilization title="Permanent link">¶</a></h3> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=1410199200&format=interactive" width=600></iframe> </center></p> <p>Python is known for using more memory than more optimized languages and, in this case, it uses <strong>7 times</strong> more than PostgresML.</p> <p>PostgresML is a Postgres extension, and it shares RAM with the database server. Postgres is very efficient at fetching and allocating only the memory it needs: it reuses <code>shared_buffers</code> and OS page cache to store rows for inference, and requires very little to no memory allocation to serve queries.</p> <p>Meanwhile, Python must allocate memory for each feature it receives from Redis and for each HTTP response it returns. This benchmark did not measure Redis memory utilization, which is an additional and often substantial cost of running traditional machine learning microservices.</p> <h4 id=training>Training<a class=headerlink href=#training title="Permanent link">¶</a></h4> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=294879553&format=interactive" width=600></iframe> </center></p> <p>Since Python often uses Pandas to load and preprocess data, it is notably more memory hungry. Before even passing the data into XGBoost, we were already at 8GB RSS (resident set size); during actual fitting, memory utilization went to almost 12GB. This test is another best case scenario for Python, since the data has already been preprocessed, and was merely passed on to the algorithm.</p> <p>Meanwhile, PostresML enjoys sharing RAM with the Postgres server and only allocates the memory needed by XGBoost. The dataset size was significant, but we managed to train the same model using only 5GB of RAM. PostgresML therefore allows training models on datasets at least twice as large as Python, all the while using identical hardware.</p> <h4 id=why-memory-utilization-is-important>Why memory utilization is important<a class=headerlink href=#why-memory-utilization-is-important title="Permanent link">¶</a></h4> <p>This is another example of doing more with less. Most machine learning algorithms, outside of FAANG and research universities, require the dataset to fit into the memory of a single machine. Distributed training is not where we want it to be, and there is still so much value to be extracted from simple linear regressions.</p> <p>Using less RAM allows to train larger and better models on larger and more complete datasets. If you happen to suffer from large machine learning compute bills, using less RAM can be a pleasant surprise at the end of your fiscal year.</p> <h2 id=what-about-ultrajsonmessagepackserializer-x>What about UltraJSON/MessagePack/Serializer X?<a class=headerlink href=#what-about-ultrajsonmessagepackserializer-x title="Permanent link">¶</a></h2> <p>We spent a lot of time talking about serialization, so it makes sense to look at prior work in that field.</p> <p>JSON is the most user-friendly format, but it's certainly not the fastest. MessagePack and Ultra JSON, for example, are sometimes faster and more efficient at reading and storing binary information. So, would using them in this benchmark be better, instead of Python's built-in <code>json</code> module?</p> <p>The answer is: not really.</p> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=1855533349&format=interactive" width=600></iframe> </center></p> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=309145169&format=interactive" width=600></iframe> </center></p> <p>Time to (de)serialize is important, but ultimately needing (de)serialization in the first place is the bottleneck. Taking data out of a remote system (e.g. a feature store like Redis), sending it over a network socket, parsing it into a Python object (which requires memory allocation), only to convert it again to a binary type for XGBoost, is causing unnecessary delays in the system.</p> <p>PostgresML does <strong>one in-memory copy</strong> of features from Postgres. No network, no (de)serialization, no unnecessary latency.</p> <h2 id=what-about-the-real-world>What about the real world?<a class=headerlink href=#what-about-the-real-world title="Permanent link">¶</a></h2> <p>Testing over localhost is convenient, but it's not the most realistic benchmark. In production deployments, the client and the server are on different machines, and in the case of the Python + Redis architecture, the feature store is yet another network hop away.</p> <p>To demonstrate this, we spun up 3 EC2 instances and ran the benchmark again. This time, PostgresML outperformed Python and Redis <strong>by a factor of 40</strong>.</p> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=179138052&format=interactive" width=600></iframe> </center></p> <p><center> <iframe frameborder=0 height=371 scrolling=no seamless src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSLNYEaLD92xfrWhx6c2Q248NJGC6Sh9l1wm055HdTPZbakjQg0PVS9KqyuWrNepYvLeOdVNfbmhCwf/pubchart?oid=10610340&format=interactive" width=600></iframe> </center></p> <p>Network gap between Redis and Gunicorn made things worse...a lot worse. Fetching data from a remote feature store added milliseconds to the request the Python architecture could not spare. The additional latency compounded, and in a system that has finite resources, caused contention. Most Gunicorn threads were simply waiting on the network, and thousands of requests were stuck in the queue.</p> <p>PostgresML didn't have this issue, because the features and the Rust inference layer live on the same system. This architectural choice removes network latency and (de)serialization from the equation.</p> <p>You'll note the concurrency issue we discussed earlier hit Postgres at 20 connections, and we used PgBouncer again to save the day.</p> <p>Scaling Postgres, once you know how to do it, isn't as difficult as it sounds.</p> <h2 id=methodology>Methodology<a class=headerlink href=#methodology title="Permanent link">¶</a></h2> <h3 id=hardware>Hardware<a class=headerlink href=#hardware title="Permanent link">¶</a></h3> <p>Both the client and the server in the first benchmark were located on the same machine. Redis was local as well. The machine is an 8 core, 16 threads AMD Ryzen 7 5800X with 32GB RAM, 1TB NVMe SSD running Ubuntu 22.04.</p> <p>AWS EC2 benchmarks were done with one <code>c5.4xlarge</code> instance hosting Gunicorn and PostgresML, and two <code>c5.large</code> instances hosting the client and Redis, respectively. They were located in the same VPC.</p> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">¶</a></h3> <p>Gunicorn was running with 5 workers and 2 threads per worker. Postgres was using 1, 5 and 20 connections for 1, 5 and 20 clients, respectively. PgBouncer was given a <code>default_pool_size</code> of 10, so a maximum of 10 Postgres connections were used for 20 and 100 clients.</p> <p>XGBoost was allowed to use 2 threads during inference, and all available CPU cores (16 threads) during training.</p> <p>Both <code>ab</code> and <code>pgbench</code> use all available resources, but are very lightweight; the requests were a single JSON object and a single query respectively. Both of the clients use persistent connections, <code>ab</code> by using HTTP Keep-Alives, and <code>pgbench</code> by keeping the Postgres connection open for the duration of the benchmark.</p> <h2 id=ml_1>ML<a class=headerlink href=#ml_1 title="Permanent link">¶</a></h2> <h3 id=data>Data<a class=headerlink href=#data title="Permanent link">¶</a></h3> <p>We used the <a href=https://www.kaggle.com/datasets/robikscube/flight-delay-dataset-20182022>Flight Status Prediction</a> dataset from Kaggle. After some post-processing, it ended up being about 2 GB of floating point features. We didn't use all columns because some of them are redundant, e.g. airport name and airport identifier, which refer to the same thing.</p> <h3 id=model>Model<a class=headerlink href=#model title="Permanent link">¶</a></h3> <p>Our XGBoost model was trained with default hyperparameters and 25 estimators (also known as boosting rounds).</p> <p>Data used for training and inference is available <a href=https://static.postgresml.org/benchmarks/flights.csv>here</a>. Data stored in the Redis feature store is available <a href=https://static.postgresml.org/benchmarks/flights_sub.csv>here</a>. It's only a subset because it was taking hours to load the entire dataset into Redis with a single Python process (28 million rows). Meanwhile, Postgres <code>COPY</code> only took about a minute.</p> <p>PostgresML model is trained with:</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>pgml</span><span class=mf>.</span><span class=n>train</span><span class=p>(</span><span class=w></span>
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a><span class=w>    </span><span class=n>project_name</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=s1>'r2'</span><span class=p>,</span><span class=w></span>
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a><span class=w>    </span><span class=n>algorithm</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=s1>'xgboost'</span><span class=p>,</span><span class=w></span>
<a href=#__codelineno-0-4 id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>    </span><span class=n>hyperparams</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=s1>'{ "n_estimators": 25 }'</span><span class=w></span>
<a href=#__codelineno-0-5 id=__codelineno-0-5 name=__codelineno-0-5></a><span class=p>);</span><span class=w></span>
</code></pre></div> <p>It had terrible accuracy (as did the Python version), probably because we were missing any kind of weather information, the latter most likely causing delays at airports.</p> <h3 id=source-code>Source code<a class=headerlink href=#source-code title="Permanent link">¶</a></h3> <p>Benchmark source code can be found on <a href=https://github.com/postgresml/postgresml/tree/master/pgml-docs/docs/blog/benchmarks/python_microservices_vs_postgresml/ >Github</a>.</p> <h2 id=feedback>Feedback<a class=headerlink href=#feedback title="Permanent link">¶</a></h2> <p>Many thanks and ❤️ to all those who are supporting this endeavor. We’d love to hear feedback from the broader ML and Engineering community about applications and other real world scenarios to help prioritize our work. You can show your support by starring us on our <a href=https://github.com/postgresml/postgresml>Github</a>.</p> <h2 id=__comments>Comments</h2> <script async crossorigin=anonymous data-category=Announcements data-category-id=DIC_kwDOHJ_hQM4CQctz data-emit-metadata=0 data-input-position=top data-lang=en data-mapping=title data-reactions-enabled=1 data-repo=postgresml/postgresml data-repo-id=R_kgDOHJ_hQA data-strict=0 data-theme=light src=https://giscus.app/client.js>
</script> <script>
  var giscus = document.querySelector("script[src*=giscus]")

  /* Set palette on initial load */
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate" ? "dark" : "light"
    giscus.setAttribute("data-theme", theme) 
  }

  /* Register event handlers after documented loaded */
  document.addEventListener("DOMContentLoaded", function() {
    var ref = document.querySelector("[data-md-component=palette]")
    ref.addEventListener("change", function() {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"

        /* Instruct Giscus to change theme */
        var frame = document.querySelector(".giscus-frame")
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        )
      }
    })
  })
</script> </article> </div> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: Backwards Compatible or Bust: Python Inside Rust Inside Postgres" class="md-footer__link md-footer__link--prev" href=../backwards-compatible-or-bust-python-inside-rust-inside-postgres/ rel=prev> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Backwards Compatible or Bust: Python Inside Rust Inside Postgres </div> </div> </a> <a aria-label="Next: Scaling PostgresML to 1 Million Requests per Second" class="md-footer__link md-footer__link--next" href=../scaling-postgresml-to-one-million-requests-per-second/ rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Scaling PostgresML to 1 Million Requests per Second </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © 2022 PostgresML Team </div> </div> <div class=md-social> <a class=md-social__link href=https://github.com/postgresml/postgresml rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://discord.gg/DmyJP3qJ7U rel=noopener target=_blank title=discord.gg> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.top", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.5a2dcb6a.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>